<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta property="og:title" content="Установка и настройка Битрикс на Cloud9"/>
    <meta property="og:description" content="Подробное описание установки и настройки Битрикс на Cloud9"/>
    <meta property="og:image" content="./img/bitrix.png">
    <link rel="icon" type="image/x-icon" href="./img/bitrix.png">
    <link rel="stylesheet" href="../font.css">
    <link rel="stylesheet" href="./style.css">
    <title>Как победить Битрикс</title>
    <style></style>
  </head>
  <body>
    <a href="../index.html" class="back-btn">К содержанию курса</a>
    <h1>Установка и настройка Битрикс на Cloud9</h1>
    <h2>Установка</h2>
    <p>
      Для того, чтобы начать работу с PHP и MySQL на Cloud9 нужно:
      <ol>
       <li>
         Создать workspace с шаблоном PHP по <a href="https://natela.github.io/php/index.html" target="_blank">этой инструкции</a>.
       </li>
       <li>
         Скачать файл <a href="https://www.1c-bitrix.ru/download/scripts/bitrixsetup.php" target="_blank">bitrixsetup.php</a>
         и загрузить его в корень созданного workspace.
       </li>
       <li>
         Обновить файл php.ini на <a href="./src/php.ini" target="_blank">этот</a>,
         в нем изменены некоторые настройки</li>
       <li>
         Запустить сервер и открыть в браузере файл
         <span class="attention">bitrixsetup.php</span>,
         указать следующие параметры и нажать загрузить.
         <img class="screenshot" src="./img/Screenshot - 05232017 - 09:14:57 PM.png"></img>
         <img class="screenshot" src="./img/Screenshot - 05232017 - 09:15:44 PM.png"></img>
       </li>
       <li>
         При установке Битрикс существенно указать следующие настройки на этапе создания базы данных:
         база данных - новая, имя пользователя и логин - ваш логин Cloud9, пароль - пустой, если не меняли в phpmyadmin.
         <img class="screenshot" src="./img/Screenshot - 05232017 - 09:41:19 PM.png"></img>
       </li>
       <li>
         При выборе решения укажите  <span class="attention">Демо-сайт для разработчиков</span>.
         После установки откроется новый мастер, в нем нужно нажать отмена и/или перейти на сайт.
         <img class="screenshot" src="./img/Screenshot - 05232017 - 09:45:54 PM.png"></img>
       </li>
       <li>
         На вкладке <span class="attention">Администрирование</span> перейдите в
         <span class="attention">Настройки продукта &rarr; Сайты &rarr; Список шаблонов</span>
         и добавьте новый шаблон.
         <img class="screenshot" src="./img/Screenshot - 05232017 - 10:35:17 PM.png"></img>
       </li>
       <li>
         Отредактируйте свой шаблон: cкопируйте в "Шаблон" и "Стили шаблона" соотвествующий код из шаблона "desktop_app"
         и добавьте в самом начале тега <span class="code attention">body</span> строчку
         <span class="code attention">&lt;div id="panel"&gt;&lt;?$APPLICATION->ShowPanel();?&gt;&lt;/div&gt;</span>
         (это вернет панель администрирования).
         <img class="screenshot" src="./img/Screenshot - 05232017 - 10:45:14 PM.png"></img>
       </li>
       <li>
         Перейдите в <span class="attention">Настройки продукта &rarr; Сайты &rarr; Список сайтов</span>
         и в параметрах сайта укажите ваш шаблон.
         <img class="screenshot" src="./img/Screenshot - 05232017 - 10:48:20 PM.png"></img>
       </li>
       <li>
         Откройте сайт в браузере.
         <img class="screenshot" src="./img/Screenshot - 05242017 - 09:03:06 AM.png"></img>
       </li>
      </ol>
    </p>
    <h2>Шаблон сайта</h2>
    <p>
      На данный момент у нас пустой шаблон и пустой сайт.
      Код шаблона находится в папке
      <span class="attention">/bitrix/templates/my-template</span>.
      <br>
      В файле <span class="attention">template_styles.css</span>
      находятся css-стили шаблона.
      <br>
      В файлах <span class="attention">header.php</span> и
      <span class="attention">footer.php</span> находится код, который будет
      загружаться на всех страницах сайта с эти шаблоном вверху и внизу страницы соответственно.
      <img class="screenshot" src="./img/Screenshot - 05242017 - 09:16:50 AM.png"></img>
      <img class="screenshot" src="./img/Screenshot - 05242017 - 09:17:05 AM.png"></img>
    </p>
    <h2>Сайт</h2>
    <p>
      Сейчас наполнение сайта отсутствует, и он, по сути,
      состоит из единственной главной страницы, которая отображается
      при открытии сайта в браузере.
      <br>
      Код этой страницы расположен в корне сайта в файле
      <span class="attention">index.php</span>.
      <img class="screenshot" src="./img/Screenshot - 05242017 - 09:54:30 AM.png"></img>
      В коде можно заметить подключение файлов
      <span class="attention">header.php</span> и
      <span class="attention">footer.php</span> из шаблона на странице.
    </p>
    <h2>Создание меню и разделов сайта</h2>
    <p>
      <ol>
        <li>
          В панели администрирования нажмите <span class="attention">Изменить страницу</span>,
          откроется окно редактирования страницы. Содержимое страницы можно удалить.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 09:59:09 AM.png"></img>
        </li>
        <li>
          Нам нужно добавить компонент <span class="attention">Меню</span>,
          который находится в <span class="attention">Компоненты &rarr; Служебные &rarr; Навигация</span>,
          перетащить его на страницу и нажать <span class="attention">Сохранить</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 10:03:05 AM.png"></img>
        </li>
        <li>
          Если посмотреть на код главной страницы <span class="attention">index.php</span>,
          мы увидим, что ее содержимое изменилось, и там появился php-код
          подключения компонента <span class="attention code">bitrix:menu</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 10:08:08 AM.png"></img>
        </li>
        <li>
          Но код, расположенный на странице сайта будет работать только на этой странице,
          и нам придется копировать этот код на каждую страницу нашего сайта.
          <br>
          Чтобы этого избежать, переместим код подключения компонента в шаблон,
          меню будет подтягиваться на каждую страницу сайта автоматически.
          <br>
          Меню будет располагаться вверху каждой страницы, поэтому добавим его в файл шаблона
          <span class="attention">header.php</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 10:16:37 AM.png"></img>
        </li>
        <li>
          Пока наше меню не отображается, так как не содержит ни одного раздела,
          поэтому добавим несколько разделов с помощью кнопки
          <span class="attention">Создать раздел</span>
          в панели администрирования.
          <br>
          При создании раздела нужно отметить галочкой
          <span class="attention">добавить пункт меню</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 10:22:38 AM.png"></img>
          Выбрать тип меню <span class="attention">Главное меню</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 10:24:39 AM.png"></img>
          И нажать <span class="attention">Готово</span>.
          <br>
          Каждый раздел следует создавать, находясь на главной странице сайта,
          чтобы избежать создания меню внутри раздела.
        </li>
        <li>
          Если меню все еще не отображается, нужно в режиме правки
          навести курсор на место, где должно располагаться меню, и
          выбрать <span class="attention">Редактировать параметры компонента</span>.
          <br>
          Должен быть выбран шаблон компонента, например,
          <span class="attention">.default</span>,
          а тип меню для первого уровня должен быть
          <span class="attention">Главное меню</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 10:38:29 AM.png"></img>
        </li>
      </ol>
      Теперь меню отображается на всех страницах сайта.
      <img class="screenshot" src="./img/Screenshot - 05242017 - 10:44:53 AM.png"></img>
      В иерархии сайта добавились папки, соответствующие разделам сайта и
      файл <span class="attention">.top.menu.php</span> с описанием главного меню сайта.
      <img class="screenshot" src="./img/Screenshot - 05242017 - 10:50:47 AM.png"></img>
    </p>
    <h2>Редактирование шаблона компонента</h2>
    <p>
      Шаблоны компонентов описывают вид компонентов (новостей, меню, галереи и т.д.)
      в вашем шаблоне сайта.
      Для того, чтобы поменять отображение этих компоненов (на примере меню), требуется:
      <ol>
        <li>
          Скопировать шаблон компонента, которой установлен сейчас, в режиме правки.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:00:32 AM.png"></img>
          Откроется окно, нужно указать название шаблона компонента,
          выбрать ваш шаблон сайта, выбрать применить новый шаблон к компоненту
          и нажать <span class="attention">Сохранить</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:01:24 AM.png"></img>
        </li>
        <li>
          Теперь в папке шаблона (<span class="attention">/bitrix/templates/my-template</span>)
          появилась папка с шаблонами компонентов и нашим шаблоном.
          В файле <span class="attention">templete.php</span> находится реализация
          шаблона компонента.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:05:00 AM.png"></img>
          Мы видим, что в цикле <span class="attention code">foreach</span>
          выводятся пункты меню ссылками, при этом у активного пункта меню выставляется
          класс <span class="attention code">selected</span>.
          Внесем изменения в шаблон и выведем ссылку на главную страницу перед
          всеми пунктами меню.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:21:28 AM.png"></img>
        </li>
        <li>
          Все стили, относящиеся к данному компоненту находятся в файле
          <span class="attention">style.css</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:10:58 AM.png"></img>
          Немного изменим их, чтобы, пункты меню располагались горизонтально.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:15:21 AM.png"></img>
        </li>
      </ol>
      Что получилось в итоге.
      <img class="screenshot" src="./img/Screenshot - 05242017 - 11:23:44 AM.png"></img>
    </p>
    <h2>Инфоблоки</h2>
    <p>
      Инфоблоки в Битрикс служат для управления динамическими данными сайта
      (новости, статьи, каталоги и т.д.).
      <br>
      Для создания инфоблока нужно:
      <ol>
        <li>
          На вкладке <span class="attention">Администрирование</span>
          перейти в раздел <span class="attention">Контент &rarr; Инфоблоки &rarr; Типы инфоблоков</span>
          и добавить новый тип.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:39:42 AM.png"></img>
          При добавлении типа указать идентификатор и название типа инфоблока.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:43:58 AM.png"></img>
        </li>
        <li>
          Далее следует создать инфоблок только что созданного типа, перейдя в него:
          <span class="attention">Контент &rarr; Инфоблоки &rarr; Типы инфоблоков  &rarr; инфо</span>.
          При создании нужно указать название и отметить наш сайт галочкой.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:46:43 AM.png"></img>
        </li>
        <li>
          Теперь инфоблок появился в разделе <span class="attention">Контент</span>
          и мы можем добавлять в него элементы (новости).
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:51:33 AM.png"></img>
          <img class="screenshot" src="./img/Screenshot - 05242017 - 11:58:48 AM.png"></img>
          Вкладки <span class="attention">Анонс</span> и
          <span class="attention">Подробно</span> служать для описания новости.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 12:18:55 PM.png"></img>
        </li>
        <li>
          В панели администрирования нажмите <span class="attention">Изменить страницу</span>,
          откроется окно редактирования страницы.
          <br>
          Удалите текст и перетащите компонент <span class="attention">Новости</span>,
          который находится в <span class="attention">Компоненты &rarr; Статьи и новости</span>,
          <img class="screenshot" src="./img/Screenshot - 05242017 - 12:23:09 PM.png"></img>
        </li>
        <li>
          В параметрах компонента выберите шаблон, созданный тип инфоблока и созданный инфоблок.
          Нажмите <span class="attention">Сохранить</span>.
          <img class="screenshot" src="./img/Screenshot - 05242017 - 12:28:24 PM.png"></img>
        </li>
      </ol>
      После всех манипуляций мы видим, что новости отображаются на сайте.
      <img class="screenshot" src="./img/Screenshot - 05242017 - 12:33:10 PM.png"></img>
      Благодаря тому, что мы использовали комплексный компонент
      <span class="attention">Новости</span>, автоматически была сгенерирована
      страница детального описания новости.
      <img class="screenshot" src="./img/Screenshot - 05242017 - 12:33:20 PM.png"></img>
      Скопировать и отредактировать шаблоны списка новостей и подробного описания
      можно аналогично шаблону меню.
    </p>
  </body>
</html>
